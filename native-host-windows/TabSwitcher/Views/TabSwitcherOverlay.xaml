<Window x:Class="TabSwitcher.Views.TabSwitcherOverlay"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Tab Switcher Overlay"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ShowActivated="False"
        Focusable="False"
        ResizeMode="NoResize">

    <Border CornerRadius="20"
            Background="#E6181818"
            BorderBrush="#30FFFFFF"
            BorderThickness="0.5"
            ClipToBounds="True">
        <ScrollViewer x:Name="ScrollView"
                      HorizontalScrollBarVisibility="Hidden"
                      VerticalScrollBarVisibility="Disabled"
                      Padding="16">
            <ItemsControl x:Name="TabCards">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border x:Name="CardBorder"
                                Width="220" Height="146"
                                CornerRadius="10"
                                Margin="0,0,12,0"
                                ClipToBounds="True"
                                BorderThickness="1"
                                BorderBrush="#26FFFFFF">
                            <Grid>
                                <!-- Thumbnail -->
                                <Image x:Name="ThumbnailImage"
                                       Source="{Binding Thumbnail}"
                                       Stretch="UniformToFill" />

                                <!-- Fallback gradient (visible when no thumbnail) -->
                                <Border x:Name="FallbackBorder" Visibility="Collapsed">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#99808080" Offset="0"/>
                                            <GradientStop Color="#66808080" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                </Border>

                                <!-- Title overlay at top -->
                                <Border VerticalAlignment="Top">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                            <GradientStop Color="#CC000000" Offset="0"/>
                                            <GradientStop Color="#00000000" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <TextBlock Text="{Binding Title}"
                                               Style="{StaticResource CardTitleStyle}"
                                               MaxWidth="200"
                                               Margin="6,5,6,10" />
                                </Border>
                            </Grid>
                        </Border>
                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                <Setter TargetName="CardBorder" Property="BorderThickness" Value="3"/>
                                <Setter TargetName="CardBorder" Property="BorderBrush" Value="White"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Thumbnail}" Value="{x:Null}">
                                <Setter TargetName="ThumbnailImage" Property="Visibility" Value="Collapsed"/>
                                <Setter TargetName="FallbackBorder" Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Border>
</Window>
